import nltk
from nltk.corpus import stopwords
from nltk.tokenize import word_tokenize, sent_tokenize

text = """ Иван Гончаров впервые в своем романе «Обломов» вводит новое для русской литературы понятие «обломовщины», которым обозначил особую социальную тенденцию, характерную, прежде всего, для русского народа, заключенную в полном безволии, апатичности, постоянной лени и чрезмерной мечтательности, когда иллюзии заменяют реальную жизнь, и человек деградирует. Само слово «обломовщина» произошло от имени главного героя произведения – Обломова и названия его родной деревни – Обломовки, которая и являлась средоточием всего того, что привело к постепенному угасанию Ильи Ильича как личности, его полной оторванности от мира и окончательному эскапизму. Изображение Обломова и «обломовщины» в романе Гончарова – это отражение процесса постепенного изменения, «слома» человека, которому прививают неестественные ценности и желания, что в итоге приводит к трагичным последствиям – обретению ложного смысла жизни, боязни реального мира и ранней смерти героя. Корни появления «обломовщины» в Обломове лежат в детстве героя – Илья Ильич рос в далекой, в буквальном смысле оторванной от реального мира и центра России деревне – Обломовке. Поместье Обломовых расположилось в живописной, тихой, умиротворяющей местности, где климат радовал своей умеренностью и спокойствием, где не было сильных дождей, ураганов или ветров, бушующего моря или величественных гор, вместо которых раскинулись пологие холмы, даже небо «ближе жмется к земле», «чтоб обнять ее покрепче, с любовью: оно распростерлось так невысоко над головой, как родительская надежная кровля, чтоб уберечь, кажется, избранный уголок от всяких невзгод». Все здесь сулило «покойную, долговременную жизнь до желтизны волос и незаметную, сну подобную смерть». Даже поры года сменяли друг друга по календарю, не разрушая посевы весенними снегами, – все в Обломовке шло по привычному укладу, не меняясь десятки лет. В таком подобии рая на земле и развивались Обломов и обломовцы, даже природой огражденные от всяких невзгод, переживаний и утрат. Люди в Обломовке жили от обряда к обряду – от рождения к свадьбе и от свадьбы к похоронам. Умиротворяющая природа усмиряла их нрав, делая тихими, безобидными и равнодушными ко всему: самые страшные злодеяния в деревне были связаны с кражей гороха или моркови, а найдя однажды мертвого человека из соседней деревни, они решили забыть об этом, так как жизнь других общин их не касалась, а значит покойник – не их проблема. Похожая ситуация была и с письмом из соседнего поместья, где был описан рецепт пива, но обломовцы боялись его открыть сразу, опасаясь недобрых вестей, способных нарушить привычное спокойствие деревни. Труд в Обломовке не любили, считая его повинностью и стараясь как можно быстрее сделать дело или вовсе переложить его на плечи другого. В поместье всю работу выполняли дворовые, которые, как видно на примере Захара, также были не самыми ответственными и трудолюбивыми людьми, но при этом оставались преданными слугами своих бар. Дни обломовцев протекали в спокойствии и безделье, а самым важным событием был выбор блюд к обеду, когда каждый предлагал свои варианты, а затем все советовались, подходя к меню с особой серьезностью: «забота о пище была первая и главная жизненная забота в Обломовке. После трапезы все впадали в сонное состояние, иногда вели ленивые бессмысленные разговоры, но чаще вовсе молчали, постепенно засыпая: «это был какой-то всепоглощающий, ничем непобедимый сон, истинное подобие смерти», которое из года в год наблюдал маленький Илья, постепенно перенимая модель поведения и ценности родителей. В детстве Илья был любознательным, активным ребенком, который всячески старался познать окружающий мир. Ему хотелось, как и другим ребятам, бегать по полям, лазить по деревьям, гулять, где запрещено, или, взобравшись на сеновал, любоваться с высоты речкой и великолепными пейзажами. Обломову нравилось наблюдать за животными, осматривать окружающую местность. Однако чрезмерно опекающие родители, которые с младенчества окружили Илью непрерывной заботой и контролем, запрещали мальчику активно взаимодействовать с миром и изучать его, прививая ему совершенно иные, «обломовские» ценности и модель поведения: постоянную лень, нежелание трудиться и учиться, безвольность и боязнь реального мира. Лишенный необходимости бороться за свои желания, получая, все, что он хочет, по первому запросу, Обломов привык к безделью. Ему не нужно было решать или делать что-либо самостоятельно – всегда рядом были родители, которые «лучше знали», что нужно их сыну, либо слуги, готовые принести ему любые кушанья, помочь одеться либо убраться в покоях. Илью растили как экзотический «комнатный цветок», всеми силами защищая его от внешнего мира и укрывая в умиротворяющем гнездышке Обломовки. Родители не требовали от сына даже успехов в учебе, так как не считали науку чем-то действительно важным и полезным, часто сами оставляли его дома по праздникам или в непогоду. Именно поэтому обучение в школе, а затем и в институте, стало для Обломова чем-то вроде указания родителей, а не реализацией его собственной воли. На занятиях Илье Ильичу было скучно, он не понимал, как полученные знания можно будет применить в дальнейшей жизни, в частности, в Обломовке. В романе Илья Ильич предстает очень чувствительным, мечтательным, человеком, который умеет видеть прекрасное и тонко переживать любые проявления внешнего мира. Во многом на формирование в герое этих качеств повлияли именно живописная обломовская природа и сказки, которые рассказывала мальчику его няня. Мифы и легенды увлекали Обломова в совершенно другой мир – мир фантастический, прекрасный и полный чудес: «Он невольно мечтает о Милитрисе Кирбитьевне; его все тянет в ту сторону, где только и знают, что гуляют, где нет забот и печалей; у него навсегда остается расположение полежать на печи, походить в готовом, незаработанном платье и поесть на счет доброй волшебницы». Даже в зрелом возрасте, понимая, что «молочных рек» не существует, Илья Ильич «бессознательно грустит подчас, зачем сказка не жизнь, а жизнь не сказка». Именно поэтому в Обломове продолжало жить то, привитое со сказками, ощущение брошенности человека в ужасающем и пугающем мире, где нужно вслепую пробираться вперед, ни видя не цели, ни дороги, спасти от которого может только истинное чудо. Сказочный, волшебный мир легенд и мифов становится для Обломова альтернативной реальностью и уже в зрелом возрасте он сам выдумывает себе сказку о будущей жизни в райской Обломовке, о бесконечном спокойном семейном счастье, благополучии и спокойствии. Однако трагизм Ильи Ильича состоит даже не в тотальном эскапизме, боязни общества, нежелании что-либо делать и бороться за свое счастье, а не понимание, что он уже заменил реальную жизнь иллюзорной. Перед смертью для Обломова его мечты более реальны и важны, чем его сын, жена, друг и окружающие люди, даже важнее его самого, ведь в мечтах у него все в порядке со здоровьем, он полон сил и энергии. Однако сам Гончаров в романе дает читателю кратко одно из объяснений этой подмены: «а может быть, сон, вечная тишина вялой жизни и отсутствие движения и всяких действительных страхов, приключений и опасностей заставляли человека творить среди естественного мира другой, несбыточный, и в нем искать разгула и потехи праздному воображению или разгадки обыкновенных сцеплений обстоятельств и причин явления вне самого явления», подчеркивая, что сама жизнь должна быть непрерывным стремлением вперед, а не бесконечным сном в «зоне комфорта». Понятие «обломовщины» в романе «Обломов» вводится Гончаровым не как единичная характеристика жизненных мотивов и особенностей натуры главного героя, а в качестве типичного и особо привлекательного для русского общества явления – архетипа Емели-дурачка, лежащего на печи и ожидающего своего звездного часа. По словам самого автора, это «злая и коварная сатира на наших прадедов, а может быть, еще и на нас самих» – сказка, в которую хочется верить каждому, но которая не имеет ничего общего с реальностью, где для достижения высот необходимо встать с печи и трудиться, работать над собой. На примере Обломова Гончаров показал, как пагубно может повлиять на чувствительно, мечтательного человека чрезмерная забота и опека, защита от стрессов и потерь, приводящая к полному разочарованию в реальной жизни и замене ее иллюзиями."""
language = 'russian'

sentences = sent_tokenize(text)

stopWords = set(stopwords.words(language))
words = word_tokenize(text)
freqTable = dict()
for word in words:
    word = word.lower()
    if word not in stopWords:
        if word in freqTable:
            freqTable[word] += 1
        else:
            freqTable[word] = 1

sentenceValue = dict()
for sentence in sentences:
    for word, freq in freqTable.items():
        if word in sentence.lower():
            if sentence in sentenceValue:
                sentenceValue[sentence] += freq
            else:
                sentenceValue[sentence] = freq

sumValues = 0
for sentence in sentenceValue:
    sumValues += sentenceValue[sentence]
    average = int(sumValues / len(sentenceValue))

summary = ''
for sentence in sentences:
    if (sentence in sentenceValue) and (sentenceValue[sentence] > (1.2 * average)):
        summary += " " + sentence


@app.route('/index', methods=['POST', 'GET'])
def index():
    if request.method == "POST":
        summary = request.form['summary']
        return redirect('index.html')
    else:
        return render_template("base.html")
